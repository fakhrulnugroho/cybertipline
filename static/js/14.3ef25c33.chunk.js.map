{"version":3,"sources":["api/axiosInstance.js","api/auth.js","api/cyberTipline.js","components/LoadingButton.js","constants/index.js","api/user.js","api/file.js","components/LoadingState.js","pages/cyberTipline/components/report/TabImage.js","pages/cyberTipline/components/report/TabReport.js","pages/cyberTipline/CyberTiplineReport.js"],"names":["axiosInstance","axios","create","baseURL","constant","API","interceptors","request","use","token","localStorage","getItem","headers","requestHandler","response","error","data","toast","message","JSON","stringify","Promise","reject","errorHandler","authLogin","a","post","createCyberTipline","d","formData","FormData","append","Date","toUTCString","files","f","searchCyberTipline","params","get","getCyberTipline","search","page","qs","showCyberTipline","id","deleteCyberTipline","delete","updateCyberTipline","put","updateCyberTiplineReport","report","getCyberTiplineDaily","cyberTiplineGeneratePdf","responseType","getCyberTiplineMonthly","getCyberTiplinePieChart","assignCyberTiplineTo","param","ctId","uId","LoadingButton","color","size","disabled","className","FILE_URL","getUser","getUserByLevel","level","createUser","deleteUser","updateUser","changePassword","changeMyPassword","deleteFile","uploadImage","img","uploadFile","file","LoadingState","style","height","TabImage","images","loadingApi","cyberTiplineId","afterSubmit","useState","modal","setModal","previewUrl","setPreviewUrl","setToUploads","loadingUpload","handleUpload","length","onClick","map","url","originalName","text","fontSize","show","onClose","withIcon","buttonText","imgExtension","maxFileSize","withPreview","onChange","imgs","src","width","alt","TabReport","getEditorState","EditorState","createEmpty","editorState","setEditorState","useEffect","html","contentState","ContentState","createFromBlockArray","convertFromHTML","createWithContent","initContent","toolbarClassName","wrapperClassName","editorClassName","editorStyle","minHeight","onEditorStateChange","e","toolbar","image","uploadCallback","previewImage","present","mandatory","CyberTiplineReport","props","parse","location","ignoreQueryPrefix","setReport","setImages","tabs","name","component","activeTab","setActiveTab","setLoadingApi","loadingBtn","setLoadingBtn","loadData","res","onSave","draftToHtml","convertToRaw","getCurrentContent","success","window","history","back","variant","t","data-tab"],"mappings":"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","file":"static/js/14.3ef25c33.chunk.js","sourcesContent":["import axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport constant from \"../constants\";\n\nconst requestHandler = (request) => {\n  const token = localStorage.getItem(\"token\");\n  request.headers[\"Authorization\"] = `Bearer ${token}`;\n  return request;\n};\n\nconst errorHandler = (error) => {\n  // toast.error(error.response.data.message);\n  if (error.response && error.response.data) toast.error(error.response.data.message);\n  else {\n    if (error.message === \"Network Error\") toast.error(\"Sepertinya koneksi internet Anda terputus, silakan cek.\");\n    else toast.error(JSON.stringify(error));\n  }\n  return Promise.reject({ ...error });\n};\n\nconst successHandler = (response) => {\n  return response;\n};\n// Init Axios\nconst axiosInstance = axios.create({\n  baseURL: constant.API,\n});\n\n// Add interceptors\naxiosInstance.interceptors.request.use((request) => requestHandler(request));\naxiosInstance.interceptors.response.use(\n  (response) => successHandler(response),\n  (error) => errorHandler(error)\n);\n\nexport default axiosInstance;\n","import axiosInstance from \"./axiosInstance\";\n\nexport async function authLogin(data) {\n  return await axiosInstance.post(\"/auth/login\", data);\n}","import axiosInstance from \"./axiosInstance\";\n\nexport async function createCyberTipline(data) {\n  const formData = new FormData();\n  for (let d in data) {\n    if (d === \"suspectDob\" || d === \"dateMadeAvailable\" || d === \"incidentDate\")\n      formData.append(d, new Date(data[d]).toUTCString());\n    else if (d === \"files\") {\n      for (let f of data.files) {\n        formData.append(\"files\", f);\n      }\n    } else formData.append(d, data[d]);\n  }\n  return await axiosInstance.post(\"/cyber-tipline\", formData);\n}\n\nexport async function searchCyberTipline(params) {\n  return await axiosInstance.get(\"/cyber-tipline/search\", { params });\n}\n\nexport async function getCyberTipline(search = null, page = 0) {\n  let qs = `?size=10&page=${page > 0 ? page - 1 : page}`;\n  if (search) qs += `&search=${search}`;\n  return await axiosInstance.get(`/cyber-tipline${qs}`);\n}\n\nexport async function showCyberTipline(id) {\n  return await axiosInstance.get(`/cyber-tipline/${id}`);\n}\n\nexport async function deleteCyberTipline(id) {\n  return await axiosInstance.delete(`/cyber-tipline/${id}`);\n}\n\nexport async function updateCyberTipline(data) {\n  return await axiosInstance.put(\"/cyber-tipline\", data);\n}\n\nexport async function updateCyberTiplineReport(report, id) {\n  return await axiosInstance.put(`/cyber-tipline/report/${id}`, { report });\n}\n\nexport async function getCyberTiplineDaily() {\n  return await axiosInstance.get(\"/cyber-tipline/stat/daily\");\n}\n\nexport async function cyberTiplineGeneratePdf(id) {\n  return await axiosInstance.get(`/cyber-tipline/pdf/${id}`, { responseType: \"blob\" });\n}\n\nexport async function getCyberTiplineMonthly() {\n  return await axiosInstance.get(\"/cyber-tipline/stat/monthly\");\n}\n\nexport async function getCyberTiplinePieChart() {\n  return await axiosInstance.get(\"/cyber-tipline/stat/pie\");\n}\n\nexport async function assignCyberTiplineTo(param) {\n  return await axiosInstance.put(`/cyber-tipline/assign-to/${param.ctId}/${param.uId}`);\n}\n","import { CButton } from \"@coreui/react\"\n\nconst LoadingButton = ({color, size}) => {\n  return (\n    <CButton color={color ?? \"primary\"} size={size ?? \"\"} disabled>\n      <span className=\"spinner-border spinner-border-sm\"></span>&ensp;\n      Loading...  \n    </CButton>\n  )\n}\n\nexport default LoadingButton\n","const constant = {\n  // API: \"http://localhost:8080/\",\n  // FILE_URL: \"http://localhost:4040\",\n  API: \"https://cybertipline-api.nugrohospace.com/\",\n  FILE_URL: \"https://cybertipline-files.nugrohospace.com/\",\n};\n\nexport default constant;\n","import axiosInstance from \"./axiosInstance\";\n\nexport async function getUser(search = null, page = 0) {\n  let qs = `?size=10&page=${page > 0 ? page - 1 : page}`;\n  if (search) qs += `&search=${search}`;\n  return await axiosInstance.get(`/user${qs}`);\n}\n\nexport async function getUserByLevel(level) {\n  return await axiosInstance.get(`/user/level/${level}`);\n}\n\nexport async function createUser(data) {\n  return await axiosInstance.post(\"/user\", data);\n}\n\nexport async function deleteUser(id) {\n  return await axiosInstance.delete(`/user/${id}`);\n}\n\nexport async function updateUser(data) {\n  return await axiosInstance.put(\"/user\", data);\n}\n\nexport async function changePassword(data, id) {\n  return await axiosInstance.put(`/user/change-password/${id}`, data);\n}\n\nexport async function changeMyPassword(data) {\n  return await axiosInstance.put(\"/user/change-my-password\", data);\n}\n","import axiosInstance from \"./axiosInstance\";\n\nexport async function deleteFile(id) {\n  return await axiosInstance.delete(`/file/${id}`);\n}\n\nexport async function uploadImage(img, ctId) {\n  const formData = new FormData();\n  formData.append(\"file\", img);\n  return await axiosInstance.put(`/image/upload/${ctId}`, formData);\n}\n\nexport async function uploadFile(file, id) {\n  const formData = new FormData();\n  formData.append(\"file\", file);\n  return await axiosInstance.put(`/file/upload/${id}`, formData);\n}\n","import { GiSandsOfTime } from \"react-icons/gi\";\n\nconst LoadingState = () => {\n  return (\n    <div className=\"d-flex justify-content-center align-items-end\" style={{height: 400}}>\n      <div className=\"text-center\">\n        <GiSandsOfTime size={256} />\n        <h1 className=\"mt-4\">Loading...</h1>\n      </div>\n    </div>\n  )\n}\n\nexport default LoadingState;\n","import ImageUploader from \"react-images-upload\";\nimport { CModal, CModalBody, CModalFooter, CModalHeader, CModalTitle } from \"@coreui/react\";\nimport { useState } from \"react\";\n// import { uploadImages } from \"../../../../api\";\nimport { FaCopy } from \"react-icons/fa\";\nimport LoadingButton from \"../../../../components/LoadingButton\";\nimport LoadingState from \"../../../../components/LoadingState\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport constant from \"../../../../constants\";\n\nconst TabImage = ({ images, cyberTiplineId, afterSubmit, loadingApi }) => {\n  const [modal, setModal] = useState(null);\n  const [previewUrl, setPreviewUrl] = useState(null);\n  const [toUploads, setToUploads] = useState([]);\n  const [loadingUpload, setLoadingUpload] = useState(false);\n\n  const handleUpload = async () => {\n    // setLoadingUpload(true);\n    // try {\n    //   await uploadImages(toUploads, cyberTiplineId);\n    //   setLoadingUpload(false);\n    //   await afterSubmit();\n    //   setModal(null);\n    // } catch (err) {\n    //   setLoadingUpload(false);\n    // }\n  };\n\n  const onDropImage = (imgs) => {\n    setToUploads(imgs);\n  };\n\n  if (loadingApi) return <LoadingState />;\n  return (\n    <>\n      <div className=\"row\">\n        <div className=\"col-md-6\">\n          {images.length === 0 && <h5 className=\"mb-3\">Belum ada image.</h5>}\n          <button className=\"btn btn-primary btn-sm\" onClick={() => setModal(\"Upload\")}>\n            Upload Image\n          </button>\n          <ul className=\"mt-3\">\n            {images.map((file) => (\n              <li key={file.id} className=\"text-primary mb-3\">\n                <h5 className=\"d-flex align-items-center cursor-pointer\">\n                  <span\n                    className=\"mr-2\"\n                    onClick={() => {\n                      setModal(\"Preview\");\n                      setPreviewUrl(file.url);\n                    }}\n                  >\n                    {file.originalName}\n                  </span>\n                  <CopyToClipboard text={`${constant.FILE_URL}/${file.url}`}>\n                    <FaCopy\n                      style={{ fontSize: 18 }}\n                      className=\"cursor-pointer\"\n                      // onClick={() => handleClickTrash(file)}\n                    />\n                  </CopyToClipboard>\n                </h5>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n      <CModal show={modal === \"Upload\" || modal === \"Preview\"} onClose={() => setModal(null)} size=\"lg\">\n        <CModalHeader>\n          <CModalTitle>{modal} Image</CModalTitle>\n        </CModalHeader>\n        <CModalBody>\n          {modal === \"Upload\" && (\n            <ImageUploader\n              withIcon={true}\n              buttonText=\"Choose images\"\n              imgExtension={[\".jpg\", \".jpeg\", \".png\", \".gif\"]}\n              maxFileSize={5242880}\n              withPreview={true}\n              onChange={onDropImage}\n            />\n          )}\n          {modal === \"Preview\" && <img src={`${constant.FILE_URL}/${previewUrl}`} width={\"100%\"} alt={previewUrl} />}\n        </CModalBody>\n        {modal === \"Upload\" && (\n          <CModalFooter>\n            <button className=\"btn btn-secondary\" onClick={() => setModal(null)}>\n              Cancel\n            </button>\n            {loadingUpload ? (\n              <LoadingButton />\n            ) : (\n              <button className=\"btn btn-primary\" onClick={handleUpload}>\n                Upload\n              </button>\n            )}\n          </CModalFooter>\n        )}\n      </CModal>\n    </>\n  );\n};\n\nexport default TabImage;\n","import { EditorState, ContentState, convertFromHTML } from \"draft-js\";\nimport { Editor } from \"react-draft-wysiwyg\";\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport \"draft-js/dist/Draft.css\";\nimport { useEffect, useState } from \"react\";\nimport { uploadImage } from \"../../../../api\";\nimport htmlToDraft from \"html-to-draftjs\";\n\nconst TabReport = ({ getEditorState, report, cyberTiplineId }) => {\n  const initContent = (html) => {\n    const contentState = html == null ? null : ContentState.createFromBlockArray(convertFromHTML(html));\n    return contentState == null ? EditorState.createEmpty() : EditorState.createWithContent(contentState);\n  };\n  const [editorState, setEditorState] = useState(EditorState.createEmpty());\n\n  const handleChangeEditor = (e) => {\n    setEditorState(e);\n    getEditorState(e);\n  };\n\n  useEffect(() => {\n    setEditorState(initContent(report));\n  }, [report]);\n\n  return (\n    <div className=\"row\">\n      <div className=\"col-12\">\n        <Editor\n          toolbarClassName=\"toolbarClassName\"\n          wrapperClassName=\"demo-wrapper p-1 border\"\n          editorClassName=\"demo-editor\"\n          editorState={editorState}\n          editorStyle={{ minHeight: 430 }}\n          onEditorStateChange={handleChangeEditor}\n          toolbar={{\n            image: {\n              uploadCallback: (e) => uploadImage(e, cyberTiplineId),\n              previewImage: true,\n              alt: { present: true, mandatory: false },\n            },\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default TabReport;\n","import {\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCardFooter,\n  CNav,\n  CNavItem,\n  CNavLink,\n  CTabContent,\n  CTabPane,\n  CTabs,\n} from \"@coreui/react\";\nimport { useEffect, useState } from \"react\";\nimport TabImage from \"./components/report/TabImage\";\nimport TabReport from \"./components/report/TabReport\";\nimport { showCyberTipline, updateCyberTiplineReport } from \"../../api\";\nimport qs from \"qs\";\nimport { EditorState, convertToRaw } from \"draft-js\";\nimport draftToHtml from \"draftjs-to-html\";\nimport LoadingButton from \"../../components/LoadingButton\";\nimport { toast } from \"react-toastify\";\n\nconst CyberTiplineReport = (props) => {\n  const queryString = qs.parse(props.location.search, { ignoreQueryPrefix: true });\n  const id = queryString.id;\n  const [report, setReport] = useState(null);\n  const [images, setImages] = useState([]);\n  const tabs = [\n    { name: \"Report\", component: TabReport },\n    { name: \"Image\", component: TabImage },\n  ];\n  const [activeTab, setActiveTab] = useState(tabs[0].name);\n  const [loadingApi, setLoadingApi] = useState(true);\n  const [editorState, setEditorState] = useState(EditorState.createEmpty());\n  const [loadingBtn, setLoadingBtn] = useState(false);\n\n  const loadData = async () => {\n    setLoadingApi(true);\n    try {\n      const res = await showCyberTipline(id);\n      setReport(res.data.report);\n      setImages(res.data.images);\n    } catch (err) {}\n    setLoadingApi(false);\n  };\n\n  const onSave = async () => {\n    setLoadingBtn(true);\n    try {\n      const report = draftToHtml(convertToRaw(editorState.getCurrentContent()));\n      await updateCyberTiplineReport(report, id);\n      toast.success(\"Report berhasing diupdate!\");\n    } catch (err) {}\n    setLoadingBtn(false);\n  };\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  return (\n    <CCard>\n      <CCardHeader>\n        <div className=\"d-flex align-items-center justify-content-between\">\n          <div>\n            <h5 className=\"d-inline\">Report Cyber Tipline</h5>\n          </div>\n          <div>\n            {activeTab === \"Report\" && (\n              <>\n                <button className=\"btn btn-primary\" onClick={onSave}>\n                  Save\n                </button>{\" \"}\n              </>\n            )}\n            <button className=\"btn btn-secondary\" onClick={() => window.history.back()}>\n              Kembali\n            </button>\n          </div>\n        </div>\n      </CCardHeader>\n      <CCardBody style={{ minHeight: \"60vh\" }}>\n        <CTabs activeTab={activeTab}>\n          <CNav variant=\"tabs\">\n            {tabs.map((t) => (\n              <CNavItem data-tab={t.name} key={t.name} onClick={() => setActiveTab(t.name)}>\n                <CNavLink data-tab={t.name}>{t.name}</CNavLink>\n              </CNavItem>\n            ))}\n          </CNav>\n          <CTabContent>\n            {tabs.map((t) => (\n              <CTabPane data-tab={t.name} key={t.name}>\n                <div className=\"mt-3\">\n                  <t.component\n                    images={images}\n                    report={report}\n                    cyberTiplineId={id}\n                    loadingApi={loadingApi}\n                    afterSubmit={loadData}\n                    getEditorState={(e) => setEditorState(e)}\n                  />\n                </div>\n              </CTabPane>\n            ))}\n          </CTabContent>\n        </CTabs>\n      </CCardBody>\n      <CCardFooter>\n        {activeTab === \"Report\" ? (\n          loadingBtn ? (\n            <>\n              <LoadingButton />{\" \"}\n            </>\n          ) : (\n            <>\n              <button className=\"btn btn-primary\" onClick={onSave}>\n                Save\n              </button>{\" \"}\n            </>\n          )\n        ) : null}\n        <button className=\"btn btn-secondary\" onClick={() => window.history.back()}>\n          Kembali\n        </button>\n      </CCardFooter>\n    </CCard>\n  );\n};\n\nexport default CyberTiplineReport;\n"],"sourceRoot":""}